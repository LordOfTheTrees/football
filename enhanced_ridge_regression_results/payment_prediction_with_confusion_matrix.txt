================================================================================
Enhanced Payment Prediction: Confusion Matrix & Classification Analysis
Generated: 2025-10-30 09:03:12
================================================================================


================================================================================
PAYMENT PREDICTION WITH CONFUSION MATRIX ANALYSIS
================================================================================

================================================================================
FIXED PAYMENT PREDICTION: LOGISTIC REGRESSION
Using AVERAGED performance (Years 1-3)
================================================================================
‚úì Loaded 562 records from file
‚úì Loaded 562 seasons with payment labels
Excluding QBs drafted after 2020
  Before: 73 unique QBs
  After: 59 unique QBs
‚úì Loaded 798 records from season records
‚úì Merged with team metrics: 513 seasons
‚úì Created Pts_adj: 513 values

Complete cases: 453

Payment outcome distribution:
  Got paid: 196 (43.3%)
  Not paid: 257 (56.7%)

Train/test split:
  Train: 362 samples (160 paid)
  Test: 91 samples (36 paid)

================================================================================
LOGISTIC REGRESSION WITH L2 REGULARIZATION
================================================================================
  C=   0.001: CV AUC = 0.7834 ¬± 0.1868
  C=   0.010: CV AUC = 0.7847 ¬± 0.1627
  C=   0.100: CV AUC = 0.7753 ¬± 0.1243
  C=   1.000: CV AUC = 0.7705 ¬± 0.1231
  C=  10.000: CV AUC = 0.7687 ¬± 0.1300
  C= 100.000: CV AUC = 0.7679 ¬± 0.1314

‚úì Best C: 0.01 (CV AUC: 0.7847)

================================================================================
TRAINING PERFORMANCE
================================================================================
  AUC = 0.8104
  Accuracy = 0.7265

================================================================================
TEST PERFORMANCE
================================================================================
  AUC = 0.6490
  Accuracy = 0.6044

================================================================================
VARIABLE IMPORTANCE
================================================================================

All features ranked by importance:
  1. total_yards_adj_avg: increases payment probability (coef=0.2355)
  2. W-L%_avg: increases payment probability (coef=0.2187)
  3. Pass_ANY/A_adj_avg: increases payment probability (coef=0.2115)
  4. Rush_Rushing_Succ%_adj_avg: increases payment probability (coef=0.2031)
  5. Pass_TD_adj_avg: increases payment probability (coef=0.2027)
  6. Pts_adj_avg: increases payment probability (coef=0.1261)

================================================================================
CONFUSION MATRIX (Threshold = 0.5)
================================================================================

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     35   20
Actual Pay        16   20

Classification Metrics:
  Precision: 0.500 (20/40 predicted pays were correct)
  Recall:    0.556 (20/36 actual pays were caught)
  F1-Score:  0.526

================================================================================
SUMMARY
================================================================================

Top 3 Most Important Predictors:
  1. total_yards_adj_avg: increases payment probability
  2. W-L%_avg: increases payment probability
  3. Pass_ANY/A_adj_avg: increases payment probability

üèÜ BEST PREDICTOR: total_yards_adj
   Model Performance: AUC = 0.649

‚úì Results saved to:
  - payment_prediction_logistic_importance.csv
  - payment_prediction_logistic_test_results.csv

================================================================================
CONFUSION MATRIX AND CLASSIFICATION ANALYSIS
================================================================================
‚úì Loaded 562 records from file
‚úì Loaded 798 records from file
Dataset for confusion matrix analysis:
  Total samples: 453
  Train: 362 (paid: 160)
  Test: 91 (paid: 36)

Predicted probability range:
  Train: 0.000 to 1.000
  Test: 0.059 to 0.790

================================================================================
CONFUSION MATRIX ANALYSIS AT DIFFERENT THRESHOLDS
================================================================================

üìä THRESHOLD = 0.3
----------------------------------------

Training Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     91  111
Actual Pay        14  146

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     14   41
Actual Pay         1   35

Test Set Classification Metrics:
  Accuracy:    0.538 (49/91 correct)
  Precision:   0.461 (35/76 predicted pays were correct)
  Recall:      0.972 (35/36 actual pays were caught)
  Specificity: 0.255 (14/55 actual no-pays were caught)
  F1-Score:    0.625

üìä THRESHOLD = 0.35
----------------------------------------

Training Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay    109   93
Actual Pay        23  137

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     18   37
Actual Pay         3   33

Test Set Classification Metrics:
  Accuracy:    0.560 (51/91 correct)
  Precision:   0.471 (33/70 predicted pays were correct)
  Recall:      0.917 (33/36 actual pays were caught)
  Specificity: 0.327 (18/55 actual no-pays were caught)
  F1-Score:    0.623

üìä THRESHOLD = 0.4
----------------------------------------

Training Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay    128   74
Actual Pay        30  130

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     19   36
Actual Pay         3   33

Test Set Classification Metrics:
  Accuracy:    0.571 (52/91 correct)
  Precision:   0.478 (33/69 predicted pays were correct)
  Recall:      0.917 (33/36 actual pays were caught)
  Specificity: 0.345 (19/55 actual no-pays were caught)
  F1-Score:    0.629

üìä THRESHOLD = 0.45
----------------------------------------

Training Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay    145   57
Actual Pay        42  118

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     27   28
Actual Pay         7   29

Test Set Classification Metrics:
  Accuracy:    0.615 (56/91 correct)
  Precision:   0.509 (29/57 predicted pays were correct)
  Recall:      0.806 (29/36 actual pays were caught)
  Specificity: 0.491 (27/55 actual no-pays were caught)
  F1-Score:    0.624

üìä THRESHOLD = 0.5
----------------------------------------

Training Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay    157   45
Actual Pay        57  103

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     34   21
Actual Pay        13   23

Test Set Classification Metrics:
  Accuracy:    0.626 (57/91 correct)
  Precision:   0.523 (23/44 predicted pays were correct)
  Recall:      0.639 (23/36 actual pays were caught)
  Specificity: 0.618 (34/55 actual no-pays were caught)
  F1-Score:    0.575

üìä THRESHOLD = 0.55
----------------------------------------

Training Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay    174   28
Actual Pay        62   98

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     40   15
Actual Pay        18   18

Test Set Classification Metrics:
  Accuracy:    0.637 (58/91 correct)
  Precision:   0.545 (18/33 predicted pays were correct)
  Recall:      0.500 (18/36 actual pays were caught)
  Specificity: 0.727 (40/55 actual no-pays were caught)
  F1-Score:    0.522

üìä THRESHOLD = 0.6
----------------------------------------

Training Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay    187   15
Actual Pay        74   86

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     47    8
Actual Pay        26   10

Test Set Classification Metrics:
  Accuracy:    0.626 (57/91 correct)
  Precision:   0.556 (10/18 predicted pays were correct)
  Recall:      0.278 (10/36 actual pays were caught)
  Specificity: 0.855 (47/55 actual no-pays were caught)
  F1-Score:    0.370

üìä THRESHOLD = 0.65
----------------------------------------

Training Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay    194    8
Actual Pay        94   66

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     50    5
Actual Pay        31    5

Test Set Classification Metrics:
  Accuracy:    0.604 (55/91 correct)
  Precision:   0.500 (5/10 predicted pays were correct)
  Recall:      0.139 (5/36 actual pays were caught)
  Specificity: 0.909 (50/55 actual no-pays were caught)
  F1-Score:    0.217

üìä THRESHOLD = 0.7
----------------------------------------

Training Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay    196    6
Actual Pay       118   42

Test Set Confusion Matrix:
                Predicted
              No Pay  Pay
Actual No Pay     54    1
Actual Pay        34    2

Test Set Classification Metrics:
  Accuracy:    0.615 (56/91 correct)
  Precision:   0.667 (2/3 predicted pays were correct)
  Recall:      0.056 (2/36 actual pays were caught)
  Specificity: 0.982 (54/55 actual no-pays were caught)
  F1-Score:    0.103

================================================================================
OPTIMAL THRESHOLD ANALYSIS
================================================================================

Performance Summary Across Thresholds:
   threshold  test_accuracy  test_precision  test_recall  test_f1_score
0       0.30       0.538462        0.460526     0.972222       0.625000
1       0.35       0.560440        0.471429     0.916667       0.622642
2       0.40       0.571429        0.478261     0.916667       0.628571
3       0.45       0.615385        0.508772     0.805556       0.623656
4       0.50       0.626374        0.522727     0.638889       0.575000
5       0.55       0.637363        0.545455     0.500000       0.521739
6       0.60       0.626374        0.555556     0.277778       0.370370
7       0.65       0.604396        0.500000     0.138889       0.217391
8       0.70       0.615385        0.666667     0.055556       0.102564

üéØ OPTIMAL THRESHOLD (by F1-score): 0.4
   F1-Score: 0.629
   Accuracy: 0.571
   Precision: 0.478
   Recall: 0.917

üìà ROC AUC Score: 0.692
   ‚Üí Moderate discriminative ability

================================================================================
FEATURE IMPORTANCE FOR CLASSIFICATION
================================================================================

Top predictors of getting paid:
  1. W-L%_avg: increases payment probability
  2. Rush_Rushing_Succ%_adj_avg: increases payment probability
  3. total_yards_adj_avg: increases payment probability

‚úì Confusion matrix analysis saved to: payment_prediction_confusion_matrix_analysis.csv
‚úì Classification feature importance saved to: payment_prediction_classification_importance.csv
